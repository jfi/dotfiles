#!/bin/zsh
set -euo pipefail

DOTFILES_DIR="${HOME}/.dotfiles"

if ! command -v brew >/dev/null 2>&1; then
  echo "ERROR: Homebrew is not installed." >&2
  exit 1
fi

# Install Homebrew packages and everything else we need
brew bundle upgrade --file="${DOTFILES_DIR}/macos/Brewfile"
# Install mise dependencies
mise install -y

echo
echo "2-bootstrap-macos complete."
echo

# Pause for confirmation before proceeding
if [ -r /dev/tty ]; then
  printf "Press Enter to continue to the next step..." >&2
  read -r </dev/tty
fi
